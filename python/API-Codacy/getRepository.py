#!/usr/bin/python

#################################################################
#   Repositorio:    Pentest Scrpts                              #
#   Nome:           getRepository                               #
#   Descrição:      Lista os repositórios                       #
#   Autor:          Carine Constantino                          #
#   Versão:         APIv3.0.0                                   #
#   Data:           26/01/2022                                  #
#################################################################

import requests
import os 


headers = {'Accept': 'application/json', 'api-token': 'YOUR TOKEN'}

req = requests.get('https://app.codacy.com/api/v3/organizations/{provider}/{remoteOrganizationName}/repositories/', params={}, headers = headers)

result = req.json()

for i in result['data']:
    output = (i['name'])
    file_ext = os.path.splitext(output)
    print('---------------------')
    print('Repo-Name:')
    print(file_ext)
